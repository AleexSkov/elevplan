@page "/DashboardAdmin"
@layout MainLayout

@using Core.Models
@using System.Net.Http.Json
@inject HttpClient Http

<h3>Admin Dashboard</h3>
<p>Oversigt over elever og deres planer:</p>
<table class="table">
    <thead>
    <tr><th>ElevId</th><th>Navn</th><th>Handling</th></tr>
    </thead>
    <tbody>
    @foreach(var e in elever)
    {
        <tr>
            <td>@e.ElevId</td>
            <td>@e.ElevNavn</td>
            <td>
                <a href="/admin/elevplan/@e.ElevId" class="btn btn-sm btn-primary">Se plan</a>
            </td>
        </tr>
    }
    </tbody>
</table>

@code {
    private List<Elevplan> elever = new();
    protected override async Task OnInitializedAsync()
    {
        elever = await Http.GetFromJsonAsync<List<Elevplan>>("api/elevplaner");
    }
}
