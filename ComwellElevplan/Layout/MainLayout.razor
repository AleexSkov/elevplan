@inherits LayoutComponentBase
@inject NavigationManager Nav
@inject IJSRuntime JS

<div class="layout">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="branding">
      <div class="logo">
        <img src="https://img.icons8.com/ios-filled/24/000000/chef-hat.png" />
      </div>
      <div class="user-display">@userName - @userRole</div>
    </div>
    <nav class="menu">
      <a href="/dashboard"><img src="https://img.icons8.com/ios-filled/20/ffffff/home.png" />Dashboard</a>
      <a href="/min-elevplan"><img src="https://img.icons8.com/ios-filled/20/ffffff/task.png" />Elevplan</a>
      @if (userRole == "admin")
      {
        <a href="/DashboardAdmin"><img src="https://img.icons8.com/ios-filled/20/ffffff/administrator.png" />Admin Dashboard</a>
      }
      <a href="/opret"><img src="https://img.icons8.com/ios-filled/20/ffffff/task.png" />Opret Elevplan</a>
      <a href="/quiz"><img src="https://img.icons8.com/ios-filled/20/ffffff/book.png" />Quiz</a>
      <a href="/leaderboard"><img src="https://img.icons8.com/ios-filled/20/ffffff/trophy.png" />Leaderboard</a>
      <a href="/forum"><img src="https://img.icons8.com/ios-filled/20/ffffff/topic.png" />Forum</a>
      <a href="#"><img src="https://img.icons8.com/ios-filled/20/ffffff/upload.png" />Dele opgaver</a>
      <a href="/profil"><img src="https://img.icons8.com/ios-filled/20/ffffff/user.png" />Profil</a>
      <div class="menu-footer">
        <a href="/opretuser"><img src="https://img.icons8.com/ios-filled/20/ffffff/add-administrator.png" />(HR) Opret Bruger</a>
        <a href="#"><img src="https://img.icons8.com/ios-filled/20/ffffff/settings.png"/>Indstillinger</a>
        <a @onclick="Logout" class="logout-link">
          <img src="https://img.icons8.com/ios-filled/20/ffffff/exit.png"/> Log ud
        </a>
      </div>
    </nav>
  </aside>

  <!-- Main content -->
  <main class="main">
    <header class="topbar">
      <h2></h2>
      <div class="actions">
        <div class="notifications">
          <img src="https://img.icons8.com/ios-filled/20/ffffff/bell.png" />
          <span class="badge">3</span>
        </div>
        <button class="new-button">Opret nyt</button>
      </div>
    </header>

    <section class="content">
      @Body
    </section>
  </main>
</div>

@code {
  private string? userName;
  private string? userRole;

  protected override async Task OnInitializedAsync()
  {
    userName = await JS.InvokeAsync<string>("localStorage.getItem", "userName");
    userRole = await JS.InvokeAsync<string>("localStorage.getItem", "userRole");
  }

  private async Task Logout()
  {
    await JS.InvokeVoidAsync("localStorage.clear");
    Nav.NavigateTo("/");
  }
}
